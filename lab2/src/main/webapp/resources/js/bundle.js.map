{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://lab2/./src/main/webapp/resources/ts/utils/DOMHandler.ts","webpack://lab2/./src/main/webapp/resources/ts/utils/ErrorHandler.ts","webpack://lab2/./src/main/webapp/resources/ts/utils/Validation.ts","webpack://lab2/./src/main/webapp/resources/ts/utils/CanvasHandler.ts","webpack://lab2/./src/main/webapp/resources/ts/main.ts"],"sourcesContent":["class DOMHandler {\n    private xInput: HTMLSelectElement | null = null;\n    private yInput: HTMLInputElement | null = null;\n    private canvas: HTMLCanvasElement | null = null;\n    private form: HTMLFormElement | null = null;\n\n    constructor() {\n        this.initializeElements();\n    }\n\n    private initializeElements(): void {\n        this.xInput = document.getElementById('coordinate-x') as HTMLSelectElement;\n        this.yInput = document.getElementById('coordinate-y') as HTMLInputElement;\n        this.canvas = document.getElementById('area-canvas') as HTMLCanvasElement;\n        this.form = document.getElementById('coordinates-form') as HTMLFormElement;\n    }\n\n    public getFormValues(): { x: string; y: string; r: number | null } {\n        return {\n            x: this.xInput?.value.trim() || '',\n            y: this.yInput?.value.trim() || '',\n            r: this.getSelectedRadius()\n        };\n    }\n\n    public getForm(): HTMLFormElement | null {\n        return this.form;\n    }\n\n    public getSelectedRadius(): number | null {\n        const selectedRadio = document.querySelector<HTMLInputElement>('input[name=\"radius\"]:checked');\n        return selectedRadio ? parseFloat(selectedRadio.value) : null;\n    }\n\n    public addFormSubmitListener(handler: EventListener): void {\n        this.form?.addEventListener('submit', handler);\n    }\n\n    public addYInputListener(handler: EventListener): void {\n        this.yInput?.addEventListener('input', handler);\n    }\n\n    public addXChangeListener(handler: EventListener): void {\n        this.xInput?.addEventListener('change', handler);\n    }\n\n    public addRadiusChangeListener(handler: EventListener): void {\n        const radioButtons = document.querySelectorAll('input[name=\"radius\"]');\n        radioButtons.forEach(radio => {\n            radio.addEventListener('change', handler);\n        });\n    }\n\n    public getXInput(): HTMLSelectElement | null {\n        return this.xInput;\n    }\n\n    public getYInput(): HTMLInputElement | null {\n        return this.yInput;\n    }\n\n    public setRadiusValue(value: number): void {\n        const radio = document.querySelector(`input[name=\"radius\"][value=\"${value}\"]`) as HTMLInputElement;\n        if (radio) {\n            radio.checked = true;\n        }\n    }\n}\n\nexport { DOMHandler };","const ERROR_DISPLAY_TIME = 5000; // 5 секунд\n\nclass ErrorHandler {\n    public showError(errorId: string, message: string): void {\n        const errorElement = document.getElementById(errorId);\n        if (!errorElement) {\n            console.warn(`Элемент с ID '${errorId}' не найден на странице`);\n            return;\n        }\n\n        errorElement.textContent = message;\n        errorElement.style.color = \"red\";\n        errorElement.style.fontSize = \"small\";\n        errorElement.style.display = 'block';\n\n        setTimeout(() => {\n            this.hideError(errorId);\n        }, ERROR_DISPLAY_TIME);\n    }\n\n    public hideError(errorId: string): void {\n        const errorElement = document.getElementById(errorId);\n        if (errorElement) {\n            errorElement.textContent = \"\";\n            errorElement.style.display = 'none';\n        }\n    }\n\n    public hideAllErrors(): void {\n        const errorIds = [\"error-x\", \"error-y\", \"error-r\"];\n        errorIds.forEach(id => this.hideError(id));\n    }\n}\n\nexport { ErrorHandler };","type ValidationResult = {\n    isValid: boolean;\n    errorMessage?: string;\n}\n\ntype FieldValidator = {\n    result: ValidationResult;\n    errorId: string;\n}\n\nclass Validator {\n    private validateX(xValue: string): ValidationResult {\n        if (!xValue.trim()) {\n            return {\n                isValid: false,\n                errorMessage: \"Please, select X coordinate\"\n            }\n        }\n        return {\n            isValid: true\n        }\n    }\n\n    private validateY(yValue: string): ValidationResult {\n        if (!yValue.trim()) {\n            return {\n                isValid: false,\n                errorMessage: \"Please, enter the Y coordinate\"\n            }\n        }\n        const yNumber = parseFloat(yValue);\n        if (isNaN(yNumber)) {\n            return {\n                isValid: false,\n                errorMessage: \"Y coordinate must be number\"\n            }\n        }\n        if (yNumber < -3 || yNumber > 3) {\n            return {\n                isValid: false,\n                errorMessage: \"Y coordinate must be greater than -3 and less than 3\"\n            }\n        }\n        return {\n            isValid: true\n        }\n    }\n\n    private validateR(radiusValue: number | null): ValidationResult {\n        if (radiusValue === null) {\n            return {\n                isValid: false,\n                errorMessage: \"Please, select Radius\"\n            }\n        }\n        return {\n            isValid: true\n        }\n    }\n\n    public validateAllFields(x: string, y: string, r: number | null): FieldValidator[] {\n        const xValidation = this.validateX(x);\n        const yValidation = this.validateY(y);\n        const rValidation = this.validateR(r);\n\n        return [\n            {result: xValidation, errorId: \"error-x\"},\n            {result: yValidation, errorId: \"error-y\"},\n            {result: rValidation, errorId: \"error-r\"}\n        ];\n    }\n}\n\nexport { Validator, type FieldValidator };","import {ErrorHandler} from \"./ErrorHandler\";\n\ntype CanvasPoint = {\n    x: number;\n    y: number;\n    hit?: boolean;\n}\n\nclass CanvasHandler {\n    private canvas: HTMLCanvasElement | null = null;\n    private ctx: CanvasRenderingContext2D | null = null;\n    private points: CanvasPoint[] = [];\n    private currentR: number | null = null;\n    private errorHandler: ErrorHandler;\n\n    private readonly CANVAS_WIDTH = 200;\n    private readonly CANVAS_HEIGHT = 300;\n    private readonly CENTER_X = 100;\n    private readonly CENTER_Y = 150;\n    private readonly GRAPH_SIZE = 160;\n    private readonly MAX_R = 3;\n\n    constructor() {\n        this.errorHandler = new ErrorHandler();\n        this.initializeCanvas();\n    }\n\n    private initializeCanvas(): void {\n        this.canvas = document.getElementById('area-canvas') as HTMLCanvasElement;\n        if (this.canvas) {\n            this.ctx = this.canvas.getContext('2d');\n            this.setupEventListeners();\n        }\n    }\n\n    private setupEventListeners(): void {\n        this.canvas?.addEventListener('click', (event) => this.handleCanvasClick(event));\n    }\n\n    public setCurrentR(r: number | null): void {\n        this.currentR = r;\n        this.redrawPoints();\n    }\n\n    private getRandomColor(): string {\n        const letters = \"0123456789ABCDEF\";\n        let color = \"#\";\n        for (let i = 0; i < 6; i++) {\n            color += letters[Math.floor(Math.random() * 16)];\n        }\n        return color;\n    }\n\n    private handleCanvasClick(event: MouseEvent): void {\n        if (!this.canvas || !this.currentR) {\n            if (!this.currentR) {\n                this.errorHandler.showError(\"error-r\", \"Please select radius R first!\");\n            }\n            return;\n        }\n\n        const rect = this.canvas.getBoundingClientRect();\n        const scale = this.GRAPH_SIZE / (this.MAX_R * 2);\n\n        const clickX = event.clientX - rect.left;\n        const clickY = event.clientY - rect.top;\n\n        const graphX = (clickX - this.CENTER_X) / scale;\n        const graphY = (this.CENTER_Y - clickY) / scale;\n\n        console.log(\"handle canvas click\", graphX, graphY);\n\n        this.submitPointToServer(graphX, graphY, this.currentR);\n    }\n\n    private submitPointToServer(x: number, y: number, r: number): void {\n        // Создаем скрытую форму для точных координат\n        const hiddenForm = document.createElement('form');\n        hiddenForm.method = 'post';\n        hiddenForm.action = 'controller';\n        hiddenForm.style.display = 'none';\n\n        // Скрытое поле для точного X\n        const hiddenX = document.createElement('input');\n        hiddenX.type = 'hidden';\n        hiddenX.name = 'x';\n        hiddenX.value = parseFloat(x.toFixed(2)).toString();\n        hiddenForm.appendChild(hiddenX);\n\n        // Скрытое поле для точного Y\n        const hiddenY = document.createElement('input');\n        hiddenY.type = 'hidden';\n        hiddenY.name = 'y';\n        hiddenY.value = parseFloat(y.toFixed(2)).toString();\n        hiddenForm.appendChild(hiddenY);\n\n        // Скрытое поле для радиуса\n        const hiddenR = document.createElement('input');\n        hiddenR.type = 'hidden';\n        hiddenR.name = 'radius';\n        hiddenR.value = r.toString();\n        hiddenForm.appendChild(hiddenR);\n\n        document.body.appendChild(hiddenForm);\n        hiddenForm.submit();\n    }\n\n    private drawPoint(x: number, y: number, hit: boolean): void {\n        if (!this.ctx || !this.currentR) return;\n\n        const scale = this.GRAPH_SIZE / (this.MAX_R * 2);\n        const canvasX = this.CENTER_X + x * scale;\n        const canvasY = this.CENTER_Y - y * scale;\n\n        console.log(\"draw point\", x, y, hit);\n\n        this.ctx.beginPath();\n        this.ctx.arc(canvasX, canvasY, 4, 0, 2 * Math.PI);\n        this.ctx.fillStyle = this.getRandomColor();\n        this.ctx.fill();\n        this.ctx.strokeStyle = '#ffffff';\n        this.ctx.lineWidth = 1;\n        this.ctx.stroke();\n    }\n\n    public clearPoints(): void {\n        this.points = [];\n        if (this.ctx) {\n            this.ctx.clearRect(0, 0, this.CANVAS_WIDTH, this.CANVAS_HEIGHT);\n        }\n    }\n\n    private redrawPoints(): void {\n        if (!this.ctx) return;\n\n        this.ctx.clearRect(0, 0, this.CANVAS_WIDTH, this.CANVAS_HEIGHT);\n\n        this.points.forEach(point => {\n            if (this.currentR) {\n                this.drawPoint(point.x, point.y, point.hit || false);\n            }\n        });\n    }\n\n    public addResultPoint(x: number, y: number, hit: boolean): void {\n        const pointToAdd = { x, y, hit };\n\n        console.log(\"pointToAdd\", pointToAdd);\n\n        this.points.push(pointToAdd);\n        if (this.currentR) {\n            this.drawPoint(pointToAdd.x, pointToAdd.y, hit);\n        }\n        console.log(\"points\", this.points)\n    }\n}\n\nexport { CanvasHandler };","import {DOMHandler} from \"./utils/DOMHandler\";\nimport {ErrorHandler} from \"./utils/ErrorHandler\";\nimport {FieldValidator, Validator} from \"./utils/Validation\";\nimport {CanvasHandler} from \"./utils/CanvasHandler\";\n\nclass MainApplication {\n    private domHandler: DOMHandler;\n    private errorHandler: ErrorHandler;\n    private validator: Validator;\n    private canvasHandler: CanvasHandler;\n\n    constructor() {\n        this.domHandler = new DOMHandler();\n        this.errorHandler = new ErrorHandler();\n        this.validator = new Validator();\n        this.canvasHandler = new CanvasHandler();\n\n        this.initializeEventListeners();\n        this.initializeResultPoints();\n    }\n\n    private handleRadiusChange(): void {\n        const r = this.domHandler.getSelectedRadius();\n        this.canvasHandler.setCurrentR(r);\n    }\n\n    private initializeResultPoints(): void {\n        // Инициализация точек из истории результатов\n        const resultRows = document.querySelectorAll('.result-row');\n        resultRows.forEach(row => {\n            const cells = row.querySelectorAll('.result-cell');\n            if (cells.length >= 4) {\n                const x = parseFloat(cells[0].textContent || '');\n                const y = parseFloat(cells[1].textContent || '');\n                const r = parseFloat(cells[2].textContent || '');\n                const hit = cells[3].textContent === 'Yes';\n\n                if (!isNaN(x) && !isNaN(y) && !isNaN(r)) {\n                    this.canvasHandler.addResultPoint(x, y, hit);\n                }\n            }\n        });\n\n        // Устанавливаем текущий радиус если есть в истории\n        const firstResult = document.querySelector('.result-row');\n        if (firstResult) {\n            const rCell = firstResult.querySelector('.result-cell:nth-child(3)');\n            if (rCell) {\n                const r = parseFloat(rCell.textContent || '');\n                if (!isNaN(r)) {\n                    this.domHandler.setRadiusValue(r);\n                    this.canvasHandler.setCurrentR(r);\n                }\n            }\n        }\n    }\n\n    private initializeEventListeners(): void {\n        this.domHandler.addYInputListener((e) => this.handleYInput(e));\n        this.domHandler.addXChangeListener(() => this.hideError('error-x'));\n        this.domHandler.addRadiusChangeListener(() => this.handleRadiusChange());\n        this.domHandler.getForm()?.reset();\n        this.domHandler.addFormSubmitListener((e) => this.handleFormSubmit(e));\n    }\n\n    private handleFormSubmit(event: Event): void {\n        event.preventDefault();\n        const formValues = this.domHandler.getFormValues();\n        console.log(\"formValues\", formValues)\n        const validations = this.validator.validateAllFields(formValues.x, formValues.y, formValues.r);\n\n        if (this.handleValidationResults(validations)) {\n            this.domHandler.getForm()?.submit();\n        }\n    }\n\n    private handleYInput(event: Event): void {\n        const input = event.target as HTMLInputElement;\n        input.value = input.value.replace(/[^0-9.-]/g, '');\n        this.errorHandler.hideError('error-y');\n    }\n\n    private handleValidationResults(validations: FieldValidator[]): boolean {\n        this.errorHandler.hideAllErrors();\n        return validations.every(validation => {\n            if (!validation.result.isValid) {\n                this.errorHandler.showError(validation.errorId, validation.result.errorMessage!);\n                return false;\n            }\n            return true;\n        });\n    }\n\n    private hideError(errorId: string): void {\n        this.errorHandler.hideError(errorId);\n    }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    new MainApplication();\n});"],"names":["DOMHandler","constructor","xInput","yInput","canvas","form","this","initializeElements","document","getElementById","getFormValues","x","value","trim","y","r","getSelectedRadius","getForm","selectedRadio","querySelector","parseFloat","addFormSubmitListener","handler","addEventListener","addYInputListener","addXChangeListener","addRadiusChangeListener","querySelectorAll","forEach","radio","getXInput","getYInput","setRadiusValue","checked","ErrorHandler","showError","errorId","message","errorElement","textContent","style","color","fontSize","display","setTimeout","hideError","console","warn","hideAllErrors","id","Validator","validateX","xValue","isValid","errorMessage","validateY","yValue","yNumber","isNaN","validateR","radiusValue","validateAllFields","result","CanvasHandler","ctx","points","currentR","CANVAS_WIDTH","CANVAS_HEIGHT","CENTER_X","CENTER_Y","GRAPH_SIZE","MAX_R","errorHandler","initializeCanvas","getContext","setupEventListeners","event","handleCanvasClick","setCurrentR","redrawPoints","getRandomColor","i","Math","floor","random","rect","getBoundingClientRect","scale","clickX","clientX","left","clickY","clientY","top","graphX","graphY","log","submitPointToServer","hiddenForm","createElement","method","action","hiddenX","type","name","toFixed","toString","appendChild","hiddenY","hiddenR","body","submit","drawPoint","hit","canvasX","canvasY","beginPath","arc","PI","fillStyle","fill","strokeStyle","lineWidth","stroke","clearPoints","clearRect","point","addResultPoint","pointToAdd","push","MainApplication","domHandler","validator","canvasHandler","initializeEventListeners","initializeResultPoints","handleRadiusChange","row","cells","length","firstResult","rCell","e","handleYInput","reset","handleFormSubmit","preventDefault","formValues","validations","handleValidationResults","input","target","replace","every","validation"],"sourceRoot":""}