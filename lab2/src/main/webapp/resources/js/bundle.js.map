{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://lab2/./src/main/webapp/resources/ts/utils/DOMHandler.ts","webpack://lab2/./src/main/webapp/resources/ts/utils/ErrorHandler.ts","webpack://lab2/./src/main/webapp/resources/ts/utils/Validation.ts","webpack://lab2/./src/main/webapp/resources/ts/utils/CanvasHandler.ts","webpack://lab2/./src/main/webapp/resources/ts/main.ts"],"sourcesContent":["class DOMHandler {\n    private xInput: HTMLSelectElement | null = null;\n    private yInput: HTMLInputElement | null = null;\n    private canvas: HTMLCanvasElement | null = null;\n    private form: HTMLFormElement | null = null;\n\n    constructor() {\n        this.initializeElements();\n    }\n\n    private initializeElements(): void {\n        this.xInput = document.getElementById('coordinate-x') as HTMLSelectElement;\n        this.yInput = document.getElementById('coordinate-y') as HTMLInputElement;\n        this.canvas = document.getElementById('area-canvas') as HTMLCanvasElement;\n        this.form = document.getElementById('coordinates-form') as HTMLFormElement;\n    }\n\n    public getFormValues(): { x: string; y: string; r: number | null } {\n        return {\n            x: this.xInput?.value.trim() || '',\n            y: this.yInput?.value.trim() || '',\n            r: this.getSelectedRadius()\n        };\n    }\n\n    public getForm(): HTMLFormElement | null {\n        return this.form;\n    }\n\n    public getSelectedRadius(): number | null {\n        const selectedRadio = document.querySelector<HTMLInputElement>('input[name=\"radius\"]:checked');\n        return selectedRadio ? parseFloat(selectedRadio.value) : null;\n    }\n\n    public addFormSubmitListener(handler: EventListener): void {\n        this.form?.addEventListener('submit', handler);\n    }\n\n    public addYInputListener(handler: EventListener): void {\n        this.yInput?.addEventListener('input', handler);\n    }\n\n    public addXChangeListener(handler: EventListener): void {\n        this.xInput?.addEventListener('change', handler);\n    }\n\n    public addRadiusChangeListener(handler: EventListener): void {\n        const radioButtons = document.querySelectorAll('input[name=\"radius\"]');\n        radioButtons.forEach(radio => {\n            radio.addEventListener('change', handler);\n        });\n    }\n\n    public getXInput(): HTMLSelectElement | null {\n        return this.xInput;\n    }\n\n    public getYInput(): HTMLInputElement | null {\n        return this.yInput;\n    }\n\n    public setRadiusValue(value: number): void {\n        const radio = document.querySelector(`input[name=\"radius\"][value=\"${value}\"]`) as HTMLInputElement;\n        if (radio) {\n            radio.checked = true;\n        }\n    }\n}\n\nexport { DOMHandler };","const ERROR_DISPLAY_TIME = 5000; // 5 секунд\n\nclass ErrorHandler {\n    public showError(errorId: string, message: string): void {\n        const errorElement = document.getElementById(errorId);\n        if (!errorElement) {\n            console.warn(`Элемент с ID '${errorId}' не найден на странице`);\n            return;\n        }\n\n        errorElement.textContent = message;\n        errorElement.style.color = \"red\";\n        errorElement.style.fontSize = \"small\";\n        errorElement.style.display = 'block';\n\n        setTimeout(() => {\n            this.hideError(errorId);\n        }, ERROR_DISPLAY_TIME);\n    }\n\n    public hideError(errorId: string): void {\n        const errorElement = document.getElementById(errorId);\n        if (errorElement) {\n            errorElement.textContent = \"\";\n            errorElement.style.display = 'none';\n        }\n    }\n\n    public hideAllErrors(): void {\n        const errorIds = [\"error-x\", \"error-y\", \"error-r\"];\n        errorIds.forEach(id => this.hideError(id));\n    }\n}\n\nexport { ErrorHandler };","type ValidationResult = {\n    isValid: boolean;\n    errorMessage?: string;\n}\n\ntype FieldValidator = {\n    result: ValidationResult;\n    errorId: string;\n}\n\nclass Validator {\n    private validateX(xValue: string): ValidationResult {\n        if (!xValue.trim()) {\n            return {\n                isValid: false,\n                errorMessage: \"Please, select X coordinate\"\n            }\n        }\n        return {\n            isValid: true\n        }\n    }\n\n    private validateY(yValue: string): ValidationResult {\n        if (!yValue.trim()) {\n            return {\n                isValid: false,\n                errorMessage: \"Please, enter the Y coordinate\"\n            }\n        }\n        const yNumber = parseFloat(yValue);\n        if (isNaN(yNumber)) {\n            return {\n                isValid: false,\n                errorMessage: \"Y coordinate must be number\"\n            }\n        }\n        if (yNumber < -3 || yNumber > 3) {\n            return {\n                isValid: false,\n                errorMessage: \"Y coordinate must be greater than -3 and less than 3\"\n            }\n        }\n        return {\n            isValid: true\n        }\n    }\n\n    private validateR(radiusValue: number | null): ValidationResult {\n        if (radiusValue === null) {\n            return {\n                isValid: false,\n                errorMessage: \"Please, select Radius\"\n            }\n        }\n        return {\n            isValid: true\n        }\n    }\n\n    public validateAllFields(x: string, y: string, r: number | null): FieldValidator[] {\n        const xValidation = this.validateX(x);\n        const yValidation = this.validateY(y);\n        const rValidation = this.validateR(r);\n\n        return [\n            {result: xValidation, errorId: \"error-x\"},\n            {result: yValidation, errorId: \"error-y\"},\n            {result: rValidation, errorId: \"error-r\"}\n        ];\n    }\n}\n\nexport { Validator, type FieldValidator };","type CanvasPoint = {\n    x: number;\n    y: number;\n    hit?: boolean;\n}\n\nclass CanvasHandler {\n    private canvas: HTMLCanvasElement | null = null;\n    private ctx: CanvasRenderingContext2D | null = null;\n    private points: CanvasPoint[] = [];\n    private currentR: number | null = null;\n\n    private readonly CANVAS_WIDTH = 200;\n    private readonly CANVAS_HEIGHT = 300;\n    private readonly CENTER_X = 100;\n    private readonly CENTER_Y = 150;\n    private readonly GRAPH_SIZE = 160;\n    private readonly MAX_R = 3; // Фиксированный максимальный радиус для масштаба\n\n    constructor() {\n        this.initializeCanvas();\n    }\n\n    private initializeCanvas(): void {\n        this.canvas = document.getElementById('area-canvas') as HTMLCanvasElement;\n        if (this.canvas) {\n            this.ctx = this.canvas.getContext('2d');\n            this.setupEventListeners();\n        }\n    }\n\n    private setupEventListeners(): void {\n        this.canvas?.addEventListener('click', (event) => this.handleCanvasClick(event));\n    }\n\n    public setCurrentR(r: number | null): void {\n        this.currentR = r;\n        this.redrawPoints();\n    }\n\n    private handleCanvasClick(event: MouseEvent): void {\n        if (!this.canvas || !this.currentR) {\n            if (!this.currentR) {\n                alert('Please select radius R first!');\n            }\n            return;\n        }\n\n        const rect = this.canvas.getBoundingClientRect();\n        // ФИКС: используем MAX_R вместо currentR для масштаба\n        const scale = this.GRAPH_SIZE / (this.MAX_R * 2);\n\n        const clickX = event.clientX - rect.left;\n        const clickY = event.clientY - rect.top;\n\n        const graphX = (clickX - this.CENTER_X) / scale;\n        const graphY = (this.CENTER_Y - clickY) / scale;\n\n        const roundedX = Math.round(graphX * 2) / 2;\n        const roundedY = Math.round(graphY * 2) / 2;\n\n        // Отправляем данные через существующую форму\n        this.submitPointToServer(roundedX, roundedY, this.currentR);\n    }\n\n    private submitPointToServer(x: number, y: number, r: number): void {\n        // Находим существующую форму\n        const form = document.getElementById('coordinates-form') as HTMLFormElement;\n        if (!form) return;\n\n        // Устанавливаем значения в форму\n        const xInput = document.getElementById('coordinate-x') as HTMLSelectElement;\n        const yInput = document.getElementById('coordinate-y') as HTMLInputElement;\n\n        if (xInput && yInput) {\n            // Находим ближайшее доступное значение X\n            const availableX = Array.from(xInput.options)\n                .map(opt => parseFloat(opt.value))\n                .filter(val => !isNaN(val));\n\n            const closestX = availableX.reduce((prev, curr) =>\n                Math.abs(curr - x) < Math.abs(prev - x) ? curr : prev\n            );\n\n            xInput.value = closestX.toString();\n            yInput.value = y.toString();\n\n            // Устанавливаем радиус\n            const rRadio = document.querySelector(`input[name=\"radius\"][value=\"${r}\"]`) as HTMLInputElement;\n            if (rRadio) {\n                rRadio.checked = true;\n            }\n\n            // Отправляем форму\n            form.submit();\n        }\n    }\n\n    private drawPoint(x: number, y: number, hit: boolean): void {\n        if (!this.ctx || !this.currentR) return;\n\n        // ФИКС: используем MAX_R вместо currentR для масштаба\n        const scale = this.GRAPH_SIZE / (this.MAX_R * 2);\n        const canvasX = this.CENTER_X + x * scale;\n        const canvasY = this.CENTER_Y - y * scale;\n\n        this.ctx.beginPath();\n        this.ctx.arc(canvasX, canvasY, 4, 0, 2 * Math.PI);\n        this.ctx.fillStyle = hit ? '#00ff00' : '#ff0000';\n        this.ctx.fill();\n        this.ctx.strokeStyle = '#ffffff';\n        this.ctx.lineWidth = 1;\n        this.ctx.stroke();\n    }\n\n    private redrawPoints(): void {\n        if (!this.ctx) return;\n\n        this.ctx.clearRect(0, 0, this.CANVAS_WIDTH, this.CANVAS_HEIGHT);\n\n        this.points.forEach(point => {\n            if (this.currentR) {\n                this.drawPoint(point.x, point.y, point.hit || false);\n            }\n        });\n    }\n\n    public clearPoints(): void {\n        this.points = [];\n        if (this.ctx) {\n            this.ctx.clearRect(0, 0, this.CANVAS_WIDTH, this.CANVAS_HEIGHT);\n        }\n    }\n\n    public addResultPoint(x: number, y: number, hit: boolean): void {\n        this.points.push({ x, y, hit });\n        if (this.currentR) {\n            this.drawPoint(x, y, hit);\n        }\n    }\n}\n\nexport { CanvasHandler };","import {DOMHandler} from \"./utils/DOMHandler\";\nimport {ErrorHandler} from \"./utils/ErrorHandler\";\nimport {FieldValidator, Validator} from \"./utils/Validation\";\nimport {CanvasHandler} from \"./utils/CanvasHandler\";\n\nclass MainApplication {\n    private domHandler: DOMHandler;\n    private errorHandler: ErrorHandler;\n    private validator: Validator;\n    private canvasHandler: CanvasHandler;\n\n    constructor() {\n        this.domHandler = new DOMHandler();\n        this.errorHandler = new ErrorHandler();\n        this.validator = new Validator();\n        this.canvasHandler = new CanvasHandler();\n\n        this.initializeEventListeners();\n        this.initializeResultPoints();\n    }\n\n    private handleRadiusChange(): void {\n        const r = this.domHandler.getSelectedRadius();\n        this.canvasHandler.setCurrentR(r);\n    }\n\n    private initializeResultPoints(): void {\n        // Инициализация точек из истории результатов\n        const resultRows = document.querySelectorAll('.result-row');\n        resultRows.forEach(row => {\n            const cells = row.querySelectorAll('.result-cell');\n            if (cells.length >= 4) {\n                const x = parseFloat(cells[0].textContent || '');\n                const y = parseFloat(cells[1].textContent || '');\n                const r = parseFloat(cells[2].textContent || '');\n                const hit = cells[3].textContent === 'Yes';\n\n                if (!isNaN(x) && !isNaN(y) && !isNaN(r)) {\n                    this.canvasHandler.addResultPoint(x, y, hit);\n                }\n            }\n        });\n\n        // Устанавливаем текущий радиус если есть в истории\n        const firstResult = document.querySelector('.result-row');\n        if (firstResult) {\n            const rCell = firstResult.querySelector('.result-cell:nth-child(3)');\n            if (rCell) {\n                const r = parseFloat(rCell.textContent || '');\n                if (!isNaN(r)) {\n                    this.domHandler.setRadiusValue(r);\n                    this.canvasHandler.setCurrentR(r);\n                }\n            }\n        }\n    }\n\n    private initializeEventListeners(): void {\n        this.domHandler.addFormSubmitListener((e) => this.handleFormSubmit(e));\n        this.domHandler.addYInputListener((e) => this.handleYInput(e));\n        this.domHandler.addXChangeListener(() => this.hideError('error-x'));\n        this.domHandler.addRadiusChangeListener(() => this.handleRadiusChange());\n    }\n\n    private handleFormSubmit(event: Event): void {\n        event.preventDefault();\n        const formValues = this.domHandler.getFormValues();\n        const validations = this.validator.validateAllFields(formValues.x, formValues.y, formValues.r);\n\n        if (this.handleValidationResults(validations)) {\n            this.domHandler.getForm()?.submit();\n        }\n    }\n\n    private handleYInput(event: Event): void {\n        const input = event.target as HTMLInputElement;\n        input.value = input.value.replace(/[^0-9.-]/g, '');\n        this.errorHandler.hideError('error-y');\n    }\n\n    private handleValidationResults(validations: FieldValidator[]): boolean {\n        this.errorHandler.hideAllErrors();\n        return validations.every(validation => {\n            if (!validation.result.isValid) {\n                this.errorHandler.showError(validation.errorId, validation.result.errorMessage!);\n                return false;\n            }\n            return true;\n        });\n    }\n\n    private hideError(errorId: string): void {\n        this.errorHandler.hideError(errorId);\n    }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    new MainApplication();\n});"],"names":["DOMHandler","constructor","xInput","yInput","canvas","form","this","initializeElements","document","getElementById","getFormValues","x","value","trim","y","r","getSelectedRadius","getForm","selectedRadio","querySelector","parseFloat","addFormSubmitListener","handler","addEventListener","addYInputListener","addXChangeListener","addRadiusChangeListener","querySelectorAll","forEach","radio","getXInput","getYInput","setRadiusValue","checked","ErrorHandler","showError","errorId","message","errorElement","textContent","style","color","fontSize","display","setTimeout","hideError","console","warn","hideAllErrors","id","Validator","validateX","xValue","isValid","errorMessage","validateY","yValue","yNumber","isNaN","validateR","radiusValue","validateAllFields","result","CanvasHandler","ctx","points","currentR","CANVAS_WIDTH","CANVAS_HEIGHT","CENTER_X","CENTER_Y","GRAPH_SIZE","MAX_R","initializeCanvas","getContext","setupEventListeners","event","handleCanvasClick","setCurrentR","redrawPoints","alert","rect","getBoundingClientRect","scale","clickX","clientX","left","clickY","clientY","top","graphX","graphY","roundedX","Math","round","roundedY","submitPointToServer","closestX","Array","from","options","map","opt","filter","val","reduce","prev","curr","abs","toString","rRadio","submit","drawPoint","hit","canvasX","canvasY","beginPath","arc","PI","fillStyle","fill","strokeStyle","lineWidth","stroke","clearRect","point","clearPoints","addResultPoint","push","MainApplication","domHandler","errorHandler","validator","canvasHandler","initializeEventListeners","initializeResultPoints","handleRadiusChange","row","cells","length","firstResult","rCell","e","handleFormSubmit","handleYInput","preventDefault","formValues","validations","handleValidationResults","input","target","replace","every","validation"],"sourceRoot":""}